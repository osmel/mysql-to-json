'use strict';

const _ = require('lodash');
const runAsyncGen = require('../index.js');

const logger = require('log4js').getLogger('play');

function throwErr(cb) {
	throw new Error('Error');
}

function* test() {
	try {
		yield _.partial(throwErr);
	} catch (e) {
		logger.error('Bla bla', e);
	}
}

runAsyncGen(test(), function(err, result) {
	if (err) {
		logger.error('Error', err);
		return;
	}
	logger.info('Result', result);
});
